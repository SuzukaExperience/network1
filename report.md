## 3I04 市川 敬士

# 1. 目的

1. インターネット層における、IPプロトコルを使ったIPルーティングについて理解し、どのようにIPパケットを伝送しているかを理解する。
2. ubuntu(Linux)の基本的なネットワーク設定について理解する。
3. Wiresharkを用いてパケットキャプチャを行い、IPパケット、MACフレームの構造について理解する。
4. NATやNAPT(IPマスカレード)の目的と用途について理解する。

# 2. ルーティング設定後、正しく動作していることを示すための方法とその結果、構築したネットワーク図1

- 構築したネットワークが正しく動作していることを表す結果

1. 192.168.10.1から192.168.20.1
![PNGファイル](./png/2-1.png)

2. 192.168.20.1から192.168.10.1
![PNGファイル](./png/2-2.png)

- 構築したネットワークの詳細を可視化せよ。PC(ホスト名)、NIC(インターフェース名、IPアドレス)、ネットワーク(IPアドレス、ネットマスク)を図示すること。  
また、各ホストのルーティングテーブルも明示すること。

1. ネットワーク図

![PNGファイル](./png/2-intnetGraph.png)

1. ルーティングテーブル

|ネットワーク|ネクストホップ|メトリック|
|:---|:---|:---|
|192.168.10.0/24|192.168.100.10|1|
|192.168.20.0/24|直接接続|0|
|192.168.100.0/24|直接接続|0|

# 3. NAT, NAPT設定後、正しく動作していることを示すための方法とその結果、構築したネットワーク図2

- 構築したネットワークが正しく動作していることを表す結果。

![PNGファイル](./png/3.png)

- 構築したネットワークの詳細を可視化せよ。PC(ホスト名)、NIC(インターフェース名、IPアドレス), ネットワーク(IPアドレス、ネットマスク)、NATを図示すること。  
また、各ホストのルーティングテーブルもルーティングテーブルも明示すること。

![PNGファイル](./png/3-intnetGraph.png)

- ルーティングテーブル

|ネットワーク|ネクストホップ|メトリック|
|:---|:---|:---|
|10.0.4.0/24|直接接続|0|
|192.168.10.0/24|192.168.100.10|1|
|192.168.20.0/24|直接接続|0|
|192.168.100.0/24|直接接続|0|

# 4. ICMPパケット一つ(往復分)の構造

- どうやらこれでいいらしい。まあなんかいい感じに説明して

![PNGファイル](./png/4-iki.png)

![PNGファイル](./png/4-kaeri.png)

# 5. 外部へのICMPパケットをキャプチャする。到達先のIPアドレスによる違いとexp1-2での処理

- キャプチャするNICの位置によって、ICMPパケット(IPフレーム)の内容がどのように変わっているか確認し、ex1-2で何が行われているか(実験1でex1-2に対してどのような設定を行ったのかを考えて)考察する。

- enp0s8のICMPパケット

![PNGファイル](./png/4-2-8.png)

- enp0s9のICMPパケット

![PNGファイル](./png/4-2-9.png)

上の二つのファイルはSourceとDestinationで値が変換されてるよねっていうのをてめぇの言葉でかけだってばよ。ちなみに10.0.4.15に変えられている。それこそがNATのやり方

# 6. 今回の実験で理解したこと、理解できていないこと

# 発展

- exp1-1からコマンドラインでWebページへアクセスしたとき、上記と同様にenp0s9及びenp0s8でパケットキャプチャしたときに、TCPパケット(IPフレーム)がどのように変わっているかを確認し、exp1-2で何が行われているか考察せよ。

- enp0s8

![PNGファイル](./png/hatten-8.png)

- enp0s9

![PNGファイル](./png/hatten-9.png)